# DocsGenerator
**JDK 9.0.4**  <br/>
This application creates excel/pdf files with randomly generated data through files/API/DB sources.
Generated users will be added to DB.

**UPD (18.10.2018):** <br/>
Now data is obtained through the API `http://api.randomuser.oskerko.ru/users` by default.<br/>
In case of network problems, data will be generated by this application.

**UPD (21.10.2018):** <br/>
Added DB support. Now generated users will be added to DB table `users`. <br/>
Other tables are used for data generation. <br/>

* Data is obtained through the API `http://api.randomuser.oskerko.ru/users` by default.<br/>
* In case of network problems, data will be generated by this application using DB data source.<br/>
* If the full name of the generated user already exists in the DB, then his data will be updated.<br/>
* In case of empty DB or connection problems, user will be informed and data will be generated by this application using files source.<br/>

To change DB access data go to `src\main\resources\application.properties` file and set your DB connection params:
```
db.host = localhost
db.port = 3306
db.name = yourDBname
db.user = yourUsername
db.password = yourPassword
```
###DB structure:
![DB structure](https://mariaoskar.github.io/DocsGeneratorResults/db_structure.jpg)
 
 Directory `src\main\resources\sql` includes 3 database dumps:

 * Structure with data (`generator_structure_with_data_dump.sql`) [ _Recommended_ ]
 * Only structure (`generator_only_structure_dump.sql`)
 * Only data (`generator_only_data_dump.sql`)
 
 To export run (in the project directory):
 
 ```
mysql -u {username} -p {dbname} < src\main\resources\sql\generator_structure_with_data_dump.sql
 ```
 
 
## To run app with exec-maven-plugin:
#### Compile:
```
mvn compile
```
> **note:** To compile code run this command from the project's directory. 
Source and target java levels should be set in the pom.xml (maven-compiler-plugin configuration)
#### Run:
```
mvn exec:java
```
> **note:** mainClass should be set in the pom.xml (exec-maven-plugin configuration)

## To run with jar file:
#### Build jar:
```
mvn install
```
> **note:** mainClass, jar-descriptor, execution configurations  should be set in the pom.xml (maven-assembly-plugin configuration)


#### Run:
```
java -jar target\homework3-1.0-jar-with-dependencies.jar
```

> **note:** If you use Windows terminal, make sure that you've changed encoding ( default code page - 866 ) in order to see cyrillic symbols right. 
To change encoding use command: `chcp 1251`

## Results examples:

![PDF Example](https://mariaoskar.github.io/DocsGeneratorResults/PDFTable.jpg)
<https://mariaoskar.github.io/DocsGeneratorResults/Персональные%20данные_10-10-18_01-04-56.pdf>

![Excel Example](https://mariaoskar.github.io/DocsGeneratorResults/excelTable.jpg)
<https://mariaoskar.github.io/DocsGeneratorResults/Персональные%20данные_10-10-18_01-04-55.xlsx>
